<ng-content></ng-content>

<div class="form-group form-inline my-2 w-50" *ngIf="enableFilter">
  <input class="form-control" type="text" [formControl]="filterControl" placeholder="検索" />
</div>

<table class="table table-striped text-nowrap">

  <thead>
    <tr>
      <th scope="col" *ngFor="let column of columnDefs" (click)="onSort(column)" [class.sortable]="column.sortable" [className]="column.headerClass">
        <div class="d-flex justify-content-between" >
          <ng-container *ngTemplateOutlet="column.headerCell?.template || defaultHeaderTextCell; context:{column: column}">
          </ng-container>

          <i *ngIf="column.name == sortField" class="bi" [class.bi-arrow-up-short]="sortDirection == 'desc'" [class.bi-arrow-down-short]="sortDirection == 'asc'"></i>
        </div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of renderingData">

      <td [attr.data-label]="column.label" *ngFor="let column of columnDefs">
        <ng-container *ngTemplateOutlet="column.cell?.template || defaultTextCell; context:{row: row}; context:{column: column, row: row}">
        </ng-container>
      </td>

    </tr>
  </tbody>
</table>

<div class="d-flex justify-content-between p-2" *ngIf="enablePagination">
  <ngb-pagination [collectionSize]="filteredCount" [(page)]="page" [pageSize]="pageSize" (pageChange)="onPageChange($event)">
  </ngb-pagination>

  <select class="form-select" style="width: auto; height: 38px;" [formControl]="pageSizeControl" *ngIf="enablePageSize">
    <option [ngValue]="20">20件</option>
    <option [ngValue]="50">50件</option>
    <option [ngValue]="100">100件</option>
  </select>
</div>

<ng-template #defaultHeaderTextCell let-column="column">
  {{ column.label }}
</ng-template>

<ng-template #defaultTextCell let-column="column" let-row="row">
  {{ getData(column, row) }}
</ng-template>
